syntax = "proto3";

package nft;

// For more information on gogo.proto, see:
// https://github.com/gogo/protobuf/blob/master/extensions.md
import "github.com/gogo/protobuf/gogoproto/gogo.proto";


enum ActionKind {
    transferApproval = 0;
    usageApproval = 1;
    updatePayloadApproval = 2;
}

message NonFungibleToken {
    bytes id = 1;
    bytes owner = 2;
    repeated Approval approvals = 3;
    TokenDetails details = 4;
    bool isRoot = 5;
}

message TokenDetails {
    oneof payload {
        HumanAddressDetails humanAddress = 1;
        BlockChainDetails blockchain = 2;
        ContractDetails token = 3;
    }
}

message Approval {
    bytes toAccount = 1;
    ActionKind action = 2;
    ApprovalOptions options = 3;
}

message ApprovalOptions {
    int64 timeout = 1; // nanos. todo: revisit to use block height?, if this is time then this may not be deterministic enough. Roman: this might not work well, slow/fast nets..
    int64 count = 2; // usage count
    bool immutable = 3;
}


message HumanAddressDetails {
    bytes account = 1; // anything for the spike
}

message BlockChainDetails {
    bytes account = 1; // anything for the spike
}

message ContractDetails {
    bytes account = 1; // anything for the spike
}


message IssueTokenMsg {
    bytes owner = 1;
    bytes id = 2;
    TokenDetails details = 3 [(gogoproto.nullable) = false];
    repeated Approval approvals = 4;
}

message RequestTransferTokenMsg {
    bytes id = 1;
    bytes newOwner = 2;
}

message SetApprovalMsg {
    bytes id = 1;
    bytes newOwner = 2;
}

message RevokeTokenMsg {
}
